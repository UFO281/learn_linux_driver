# <center> 第五十五章 设备树下的 platform 驱动编写
>我们在前面几章编写的设备驱动都非常的简单，都是对 IO 进行最简单的读写操作。像 I2C、
SPI、LCD 等这些复杂外设的驱动就不能这么去写了，Linux 系统要考虑到驱动的可重用性，因
此提出了驱动的分离与分层这样的软件思路，在这个思路下诞生了我们将来最常打交道的
platform 设备驱动，也叫做平台设备驱动。本章我们就来学习一下 Linux 下的驱动分离与分层，
以及 platform 框架下的设备驱动该如何编写。
---
## 55.1 设备树下的 platform 驱动简介

platform 驱动框架分为总线、设备和驱动，其中总线不需要我们这些驱动程序员去管理，这
个是 Linux 内核提供的，我们在编写驱动的时候只要关注于设备和驱动的具体实现即可。在没
有设备树的 Linux 内核下，我们需要分别编写并注册 platform_device 和 platform_driver，分别代
表设备和驱动。在使用设备树的时候，设备的描述被放到了设备树中，因此 platform_device 就
不需要我们去编写了，我们只需要实现 platform_driver 即可。在编写基于设备树的 platform 驱
动的时候我们需要注意一下几点：





